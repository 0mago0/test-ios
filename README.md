# æ¼¢å­—æ‰‹å¯«ç·´ç¿’ App

ä¸€æ¬¾ iOS æ‰‹å¯«ç·´ç¿’æ‡‰ç”¨ç¨‹å¼ï¼Œè®“ä½¿ç”¨è€…ç·´ç¿’æ›¸å¯«æ¼¢å­—ï¼Œä¸¦å¯å°‡æ‰‹å¯«çµæœä¸Šå‚³è‡³ GitHub å„²å­˜ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- **æ‰‹å¯«ç·´ç¿’**ï¼šä½¿ç”¨ PencilKit æˆ–è‡ªè¨‚ç¹ªåœ–æ¨¡å¼æ›¸å¯«æ¼¢å­—
- **å­—åº«ç³»çµ±**ï¼šå…§å»ºåƒå­—æ–‡å­—åº«ï¼Œä¹Ÿå¯å¾ç¶²å€è¼‰å…¥è‡ªè¨‚å­—åº«
- **é€²åº¦è¿½è¹¤**ï¼šè¨˜éŒ„å·²å®Œæˆçš„æ¼¢å­—ï¼ŒæŸ¥çœ‹å­¸ç¿’é€²åº¦
- **GitHub æ•´åˆ**ï¼šå°‡æ‰‹å¯«ä½œå“ç›´æ¥ä¸Šå‚³è‡³ GitHub å„²å­˜åº«
- **æµæš¢çš„å¡ç‰‡è¼ªæ’­**ï¼šå·¦å³æ»‘å‹•åˆ‡æ›ä¸åŒæ¼¢å­—
- **å¯èª¿æ•´ç•«å¸ƒ**ï¼šæ”¯æ´èª¿æ•´ç­†åˆ·ç²—ç´°èˆ‡ç•«å¸ƒç¸®æ”¾

## ï¿½ï¸ ç³»çµ±éœ€æ±‚

- **iOS è£ç½®**ï¼šiOS 15.0 æˆ–æ›´æ–°ç‰ˆæœ¬
- **é–‹ç™¼ç’°å¢ƒ**ï¼šmacOS æ­é… Xcode 14.0+
- **Apple ID**ï¼šéœ€è¦å…è²»æˆ–ä»˜è²»çš„ Apple é–‹ç™¼è€…å¸³è™Ÿ

## ğŸ“¦ ç·¨è­¯èˆ‡å®‰è£

### æ­¥é©Ÿ 1ï¼šä¸‹è¼‰å°ˆæ¡ˆ

```bash
git clone https://github.com/0mago0/test-ios.git
cd test-ios
```

### æ­¥é©Ÿ 2ï¼šä½¿ç”¨ Xcode é–‹å•Ÿå°ˆæ¡ˆ

```bash
open a.xcodeproj
```

æˆ–æ‰‹å‹•åœ¨ Finder ä¸­é›™æ“Š `a.xcodeproj` é–‹å•Ÿã€‚

### æ­¥é©Ÿ 3ï¼šè¨­å®šé–‹ç™¼è€…å¸³è™Ÿ

1. åœ¨ Xcode ä¸­ï¼Œé»æ“Šå·¦å´å°ˆæ¡ˆå°è¦½å™¨ä¸­çš„ **a** å°ˆæ¡ˆï¼ˆè—è‰²åœ–ç¤ºï¼‰
2. é¸æ“‡ **Signing & Capabilities** æ¨™ç±¤
3. åœ¨ **Team** ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ä½ çš„ Apple ID
   - è‹¥å°šæœªç™»å…¥ï¼Œé»æ“Š **Add Account...** ä¸¦ä½¿ç”¨ä½ çš„ Apple ID ç™»å…¥
   - å…è²»çš„ Apple ID å³å¯ï¼Œä¸éœ€ä»˜è²»é–‹ç™¼è€…å¸³è™Ÿ
4. ç¢ºä¿ **Automatically manage signing** å·²å‹¾é¸
5. è‹¥å‡ºç¾ Bundle Identifier è¡çªï¼Œå°‡å…¶æ”¹ç‚ºç¨ç‰¹çš„åç¨±ï¼Œä¾‹å¦‚ï¼š
   ```
   com.yourname.handwriting-practice
   ```

### æ­¥é©Ÿ 4ï¼šé€£æ¥ iOS è£ç½®

1. ä½¿ç”¨å‚³è¼¸ç·šå°‡ iPhone æˆ– iPad é€£æ¥è‡³ Mac
2. åœ¨è£ç½®ä¸Šé»æ“Š **ä¿¡ä»»æ­¤é›»è…¦**
3. åœ¨ Xcode ä¸Šæ–¹çš„è£ç½®é¸æ“‡å™¨ä¸­ï¼Œé¸æ“‡ä½ çš„å¯¦é«”è£ç½®ï¼ˆéæ¨¡æ“¬å™¨ï¼‰

### æ­¥é©Ÿ 5ï¼šé–‹å•Ÿé–‹ç™¼è€…æ¨¡å¼ï¼ˆiOS 16+ï¼‰

iOS 16 åŠæ›´æ–°ç‰ˆæœ¬éœ€è¦å…ˆå•Ÿç”¨é–‹ç™¼è€…æ¨¡å¼æ‰èƒ½å®‰è£é–‹ç™¼ä¸­çš„ Appï¼š

1. åœ¨ iPhone/iPad ä¸Šé–‹å•Ÿ **è¨­å®š**
2. å‰å¾€ **éš±ç§æ¬Šèˆ‡å®‰å…¨æ€§**ï¼ˆæ»‘åˆ°æœ€ä¸‹æ–¹ï¼‰
3. é»æ“Š **é–‹ç™¼è€…æ¨¡å¼**
4. å°‡é–‹é—œåˆ‡æ›ç‚º **é–‹å•Ÿ**
5. ç³»çµ±æœƒæç¤ºéœ€è¦é‡æ–°å•Ÿå‹•è£ç½®ï¼Œé»æ“Š **é‡æ–°å•Ÿå‹•**
6. é‡å•Ÿå¾Œæœƒå‡ºç¾ç¢ºèªå°è©±æ¡†ï¼Œé»æ“Š **é–‹å•Ÿ** ç¢ºèªå•Ÿç”¨

> âš ï¸ è‹¥æ‰¾ä¸åˆ°ã€Œé–‹ç™¼è€…æ¨¡å¼ã€é¸é …ï¼Œè«‹å…ˆç”¨ Xcode å˜—è©¦ç·¨è­¯ä¸€æ¬¡ï¼ˆå³ä½¿å¤±æ•—ï¼‰ï¼Œè©²é¸é …å°±æœƒå‡ºç¾ã€‚

### æ­¥é©Ÿ 6ï¼šç·¨è­¯ä¸¦å®‰è£

1. æŒ‰ä¸‹ `Cmd + R` æˆ–é»æ“Šå·¦ä¸Šè§’çš„ â–¶ï¸ æŒ‰éˆ•
2. Xcode æœƒè‡ªå‹•ç·¨è­¯ä¸¦å°‡ App å®‰è£åˆ°ä½ çš„è£ç½®ä¸Š
3. é¦–æ¬¡å®‰è£å¯èƒ½éœ€è¦ 1-2 åˆ†é˜

### æ­¥é©Ÿ 7ï¼šä¿¡ä»»é–‹ç™¼è€…ï¼ˆé¦–æ¬¡å®‰è£ï¼‰

é¦–æ¬¡å®‰è£æ™‚ï¼ŒiOS æœƒé˜»æ­¢ App åŸ·è¡Œã€‚è«‹ä¾ç…§ä»¥ä¸‹æ­¥é©Ÿè§£é™¤é™åˆ¶ï¼š

1. åœ¨ iPhone/iPad ä¸Šé–‹å•Ÿ **è¨­å®š**
2. å‰å¾€ **ä¸€èˆ¬** â†’ **VPN èˆ‡è£ç½®ç®¡ç†**
3. åœ¨ã€Œé–‹ç™¼è€… Appã€å€å¡Šä¸­ï¼Œé»æ“Šä½ çš„ Apple ID
4. é»æ“Š **ä¿¡ä»»ã€Œä½ çš„ Apple IDã€**
5. ç¢ºèªä¿¡ä»»å¾Œï¼Œå³å¯æ­£å¸¸é–‹å•Ÿ App

### å¸¸è¦‹å•é¡Œ

#### âŒ å‡ºç¾ "Untrusted Developer" éŒ¯èª¤
è«‹åƒç…§ä¸Šæ–¹ã€Œæ­¥é©Ÿ 6ï¼šä¿¡ä»»é–‹ç™¼è€…ã€è¨­å®šã€‚

#### âŒ å‡ºç¾ Signing éŒ¯èª¤
- ç¢ºèªå·²é¸æ“‡æ­£ç¢ºçš„ Teamï¼ˆä½ çš„ Apple IDï¼‰
- å˜—è©¦æ›´æ”¹ Bundle Identifier ç‚ºç¨ç‰¹çš„åç¨±
- ç¢ºä¿è£ç½®å·²é€£æ¥ç¶²è·¯ï¼ˆXcode éœ€é©—è­‰æ†‘è­‰ï¼‰

#### âŒ App 7 å¤©å¾Œç„¡æ³•é–‹å•Ÿ
ä½¿ç”¨å…è²» Apple ID ç°½ç½²çš„ App æœ‰æ•ˆæœŸç‚º 7 å¤©ã€‚éæœŸå¾Œéœ€é‡æ–°é€£æ¥ Mac ä¸¦åŸ·è¡Œ `Cmd + R` é‡æ–°å®‰è£ã€‚

> ğŸ’¡ **æç¤º**ï¼šä»˜è²» Apple Developer Programï¼ˆå¹´è²» $99 USDï¼‰å¯ç²å¾— 1 å¹´æœ‰æ•ˆæœŸçš„ç°½ç½²æ†‘è­‰ã€‚

#### âŒ ç·¨è­¯æ™‚å‡ºç¾ "No signing certificate" éŒ¯èª¤
1. å‰å¾€ Xcode â†’ Settings â†’ Accounts
2. é¸æ“‡ä½ çš„ Apple ID
3. é»æ“Š **Manage Certificates**
4. é»æ“Šå·¦ä¸‹è§’ **+** è™Ÿï¼Œæ–°å¢ **Apple Development** æ†‘è­‰

## âš™ï¸ è¨­å®š

### å‰µå»º GitHub å„²å­˜åº«æ•™å­¸

<details>
<summary>å‰µå»º GitHub å„²å­˜åº«æ•™å­¸</summary>

è‹¥å°šæœªæ“æœ‰å„²å­˜åº«ï¼Œå¯ä¾ä»¥ä¸‹æ­¥é©Ÿå‰µå»ºï¼š

1. ç™»å…¥ [GitHub](https://github.com)ã€‚
2. é»æ“Šå³ä¸Šè§’çš„ **+** æŒ‰éˆ•ï¼Œé¸æ“‡ **New repository**ã€‚
3. å¡«å¯«å„²å­˜åº«åç¨±ï¼ˆä¾‹å¦‚ï¼š`test-ios`ï¼‰ã€‚
4. é¸æ“‡ **Public** æˆ– **Private**ï¼Œæ ¹æ“šéœ€æ±‚è¨­å®šå„²å­˜åº«çš„å¯è¦‹æ€§ã€‚
5. å‹¾é¸ **Add a README file**ï¼ˆå¯é¸ï¼‰ã€‚
6. é»æ“Š **Create repository** æŒ‰éˆ•å®Œæˆå‰µå»ºã€‚

å®Œæˆå¾Œï¼Œå°‡å„²å­˜åº«çš„åç¨±ï¼ˆä¾‹å¦‚ï¼š`test-ios`ï¼‰å¡«å…¥ App çš„ GitHub è¨­å®šé é¢ä¸­å°æ‡‰çš„ **Repo** æ¬„ä½ã€‚
</details>


### GitHub ä¸Šå‚³è¨­å®š

è‹¥è¦ä½¿ç”¨ GitHub ä¸Šå‚³åŠŸèƒ½ï¼Œéœ€åœ¨ App è¨­å®šé é¢ä¸­å¡«å…¥ï¼š

![ç¤ºæ„åœ–](image.png)

**åœ–ç‰‡æ¨™è¨˜èªªæ˜ï¼š**
- ğŸ”µ **è—è‰²æ¡†**ï¼šOwnerï¼ˆGitHub ä½¿ç”¨è€…åç¨±ï¼‰
- ğŸ”´ **ç´…è‰²æ¡†**ï¼šRepoï¼ˆå„²å­˜åº«åç¨±ï¼‰
- ğŸŸ¢ **ç¶ è‰²æ¡†**ï¼šBranch åˆ†æ”¯åç¨±
- ğŸŸ¡ **é»ƒè‰²æ¡†**ï¼šè·¯å¾‘å‰ç¶´

| æ¬„ä½ | èªªæ˜ |
|------|------|
| **Owner** | è‡ªå·±çš„ GitHub ä½¿ç”¨è€…åç¨±æˆ–çµ„ç¹”åç¨± |
| **Repo** | å„²å­˜åº«åç¨± |
| **Branch** | åˆ†æ”¯åç¨±ï¼ˆé è¨­ç‚º `main`ï¼‰ |
| **è·¯å¾‘å‰ç¶´** | æª”æ¡ˆå­˜æ”¾è·¯å¾‘å‰ç¶´ï¼ˆé è¨­ç‚º `handwriting`ï¼‰ |
| **GitHub Token** | å…·æœ‰ `contents:write` æ¬Šé™çš„ Personal Access Token |

> ğŸ’¡ å»ºè­°ä½¿ç”¨ Fine-grained Personal Access Tokenï¼Œåƒ…å°ç›®æ¨™ repo é–‹å•Ÿ contents:write æ¬Šé™ã€‚
### è‡ªè¨‚å­—åº«

1. æº–å‚™ä¸€å€‹ `.txt` ç´”æ–‡å­—æª”æ¡ˆï¼Œå…§å®¹ç‚ºè¦ç·´ç¿’çš„æ¼¢å­—
2. å°‡æª”æ¡ˆæ”¾ç½®æ–¼å¯å…¬é–‹å­˜å–çš„ç¶²å€
3. åœ¨è¨­å®šé é¢ä¸­è¼¸å…¥ç¶²å€ä¸¦è¼‰å…¥

è‹¥ä¸è¨­å®šï¼ŒApp å°‡ä½¿ç”¨å…§å»ºçš„åƒå­—æ–‡å­—åº«ã€‚

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

```
a/
â”œâ”€â”€ aApp.swift              # App å…¥å£
â”œâ”€â”€ ContentView.swift       # ä¸»è¦–åœ–
â”œâ”€â”€ CharacterLoader.swift   # å­—åº«è¼‰å…¥ç®¡ç†å™¨
â”œâ”€â”€ Helpers/
â”‚   â”œâ”€â”€ GHKeys.swift        # GitHub è¨­å®šéµå€¼å¸¸æ•¸
â”‚   â””â”€â”€ KeychainHelper.swift # Keychain å­˜å–è¼”åŠ©
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ StrokePoint.swift   # ç­†ç•«è³‡æ–™æ¨¡å‹
â”œâ”€â”€ Services/
â”‚   â””â”€â”€ GitHubService.swift # GitHub API æœå‹™
â””â”€â”€ Views/
    â”œâ”€â”€ Components/
    â”‚   â”œâ”€â”€ Crosshair.swift         # åå­—æº–å¿ƒå…ƒä»¶
    â”‚   â”œâ”€â”€ PKCanvasViewWrapper.swift # PencilKit ç•«å¸ƒå°è£
    â”‚   â”œâ”€â”€ SimpleDrawingView.swift # ç°¡æ˜“ç¹ªåœ–è¦–åœ–
    â”‚   â””â”€â”€ ToastView.swift         # Toast æç¤ºå…ƒä»¶
    â””â”€â”€ Screens/
        â”œâ”€â”€ DrawingView.swift       # ä¸»ç¹ªåœ–é é¢
        â”œâ”€â”€ GitHubSettingsView.swift # GitHub è¨­å®šé é¢
        â””â”€â”€ ProgressSheetView.swift  # é€²åº¦é¡¯ç¤ºé é¢
```

## ğŸ”§ æŠ€è¡“æ£§

- **SwiftUI** - ç¾ä»£åŒ– UI æ¡†æ¶
- **PencilKit** - Apple Pencil æ‰‹å¯«æ”¯æ´
- **Keychain** - å®‰å…¨å„²å­˜æ•æ„Ÿè³‡è¨Š
- **GitHub REST API** - æª”æ¡ˆä¸Šå‚³æ•´åˆ

---

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼
